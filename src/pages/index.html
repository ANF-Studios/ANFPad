<!DOCTYPE html>
<!--This is a comment btw-->
<html lang="en-US">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Draft</title>
  <link id="theme" rel="stylesheet" href="../styles/index.css" />
  <script defer>
    const partyjs = require("../components/party");
    function checkForTheSecret() {
      if (event.shiftKey && event.altKey && event.keyCode == 65) {
        partyjs.element(event.target, {
          color: ["#a864fd", "#29cdff", "#78ff44", "#ff718d", "#fdff6a"],
          count: partyjs.variation(25, 0.5),
          size: partyjs.minmax(7.5, 15),
          velocity: partyjs.minmax(-300, -600),
          angularVelocity: partyjs.minmax(6, 9),
        });
      }
    }
  </script>
  <noscript style="text-align: center; padding: 50%">Oh no!<br />
    We cannot run Draft with scripts disabled! Please enable
    scripts.</noscript>
</head>

<body>
  <textarea id="pad" onkeydown="checkForTheSecret(event)" placeholder="Start writing!"></textarea>
  <script defer>
    const textArea = document.getElementById("pad");


    textArea.addEventListener("keydown", (keyBoardEvent) => {
    // Check if TAB key was pressed.
    if (keyBoardEvent.key == 'Tab') {
      textArea.value += "    "; // Keep note that this will be changed according
                                // to the preference of the user and how much spaces
                                // they want. We might not use tabs because tabs
                                // cause conflicts on different devices, but we'll see.
  }

      // Check for shortcut keys.
      switch (keyBoardEvent.key) {
        case "(":
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
            textArea.value.substring(0, startPos) +
            ")" +
            textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        case "{":
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
            textArea.value.substring(0, startPos) +
           "}" +
          textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        case "[":
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
            textArea.value.substring(0, startPos) +
           "]" +
          textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        case "<":
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
            textArea.value.substring(0, startPos) +
            ">" +
            textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        case "'":
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
           textArea.value.substring(0, startPos) +
           "'" +
          textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        case '"':
        {
          let startPos = textArea.selectionStart;
          let endPos = textArea.selectionEnd;
          textArea.value =
           textArea.value.substring(0, startPos) +
            '"' +
          textArea.value.substring(endPos, textArea.value.length);
          textArea.selectionEnd = endPos;
          break;
        }

        default:
          break;
      }
    });
  </script>
</body>

</html>